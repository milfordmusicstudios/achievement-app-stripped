<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings ‚Ä¢ Achievement App</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* light, non-invasive helpers (works with your existing styles) */
    .settings-wrap{max-width:980px;margin:24px auto;padding:0 16px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .row + .row{margin-top:14px}
    .section-title{color:#00477d;font-weight:700;margin:6px 0 12px}
    .inputs input{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px}
    .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:18px}
    .avatar-wrap{display:flex;align-items:center;gap:16px}
    .avatar-wrap img{width:96px;height:96px;border-radius:16px;object-fit:cover;border:1px solid #eee}
    .helper{color:#666;font-size:12px}
    .pw-field{position:relative}
    .pw-toggle{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:16px}
    /* simple modal */
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1000;align-items:center;justify-content:center}
    .modal .card{background:#fff;border-radius:14px;box-shadow:0 10px 28px rgba(0,0,0,.25);padding:16px;max-width:520px;width:92%}
    .modal h3{margin:0 0 10px;color:#00477d}
    .modal ul{list-style:none;margin:0;padding:0;max-height:300px;overflow:auto}
    .modal li+li{margin-top:8px}
    .blue-button{background:#3399e8;color:#fff;border:none;border-radius:12px;padding:10px 14px;cursor:pointer}
    .ghost{background:#fff;color:#00477d;border:1px solid #00477d}
  </style>
</head>
<body>

  <main class="settings-wrap">
    <h1 class="section-title">Account Settings</h1>

    <!-- Avatar + Basic Info -->
    <section class="row">
      <div class="avatar-wrap">
        <img id="avatarImage" src="images/logos/default.png" alt="Avatar" />
        <div class="inputs" style="flex:1">
          <div class="row">
            <input id="firstName" type="text" placeholder="First Name" />
            <input id="lastName" type="text" placeholder="Last Name" />
          </div>
        </div>
      </div>
      <div class="inputs">
        <div class="section-title">Login & Credentials</div>
        <input id="newEmail" type="email" placeholder="Email" />

        <div class="row">
          <div class="pw-field">
            <input id="currentPassword" type="password" placeholder="Current Password" />
            <button id="toggleCurrentPw" class="pw-toggle" aria-label="Show current password">üëÅÔ∏è</button>
          </div>
          <div class="pw-field">
            <input id="newPassword" type="password" placeholder="New Password" />
            <button id="toggleNewPw" class="pw-toggle" aria-label="Show new password">üëÅÔ∏è</button>
          </div>
        </div>

        <small id="credsGuard" class="helper" style="display:none;">
          You‚Äôre viewing another profile. You can only change the login email & password for the account you‚Äôre signed into.
        </small>
      </div>
    </section>

    <!-- Actions -->
    <div class="actions">
      <button id="switchUserBtn" class="blue-button ghost" style="display:none;">Switch User</button>
      <button id="switchRoleBtn" class="blue-button ghost" style="display:none;">Switch Role</button>
      <button id="logoutBtn" class="blue-button ghost">Log Out</button>
      <button id="cancelBtn" class="blue-button ghost">Home</button>
      <button id="saveBtn" class="blue-button">Save</button>
    </div>
  </main>

  <!-- Switch User Modal -->
  <div id="userSwitchModal" class="modal" role="dialog" aria-modal="true">
    <div class="card">
      <h3>Switch User</h3>
      <ul id="userSwitchList"></ul>
      <div class="actions" style="justify-content:flex-end;margin-top:12px">
        <button id="cancelUserSwitchBtn" class="blue-button ghost">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Switch Role Modal -->
  <div id="roleSwitchModal" class="modal" role="dialog" aria-modal="true">
    <div class="card">
      <h3>Switch Role</h3>
      <ul id="roleSwitchList"></ul>
      <div class="actions" style="justify-content:flex-end;margin-top:12px">
        <button id="cancelRoleSwitchBtn" class="blue-button ghost">Cancel</button>
      </div>
    </div>
  </div>

  <script type="module" src="supabase.js"></script>
  <script type="module" src="settings.js"></script>
</body>
</html>
