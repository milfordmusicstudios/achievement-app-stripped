<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Log Points | Achievement App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="white-page">

<main class="app white-page">
  <h2 style="text-align: center; color: #3eb7f8; margin: 10px 0;">Log Points</h2>

<form class="settings-form" id="logForm">
  <table style="width: 100%; border-collapse: collapse;">
    <!-- Row 1: Student -->
    <tr id="logStudentRow">
      <td colspan="2" style="padding: 10px;">
        <div class="student-selector" id="logStudentSelector">
          <div class="selected-chips" id="logStudentChips"></div>
          <input type="text" id="logStudentSearch" placeholder="Student Search" autocomplete="off" />
          <div class="selector-results" id="logStudentResults">
            <div class="student-placeholder">Start typing to find a student.</div>
          </div>
        </div>
        <div class="selector-actions">
          <button type="button" id="clearLogStudent">Clear search</button>
        </div>
        <input type="hidden" id="logStudent" />
      </td>
    </tr>

    <!-- Row 2: Category + Notes -->
<tr>
  <td class="category-cell" style="vertical-align: top;">
    <select id="logCategory" class="white-input" style="width: 100%;">
      <option value="">Category</option>
    </select>
    <div style="text-align: center; margin-top: 10px;">
      <img id="previewImage" src="images/categories/allCategories.png" alt="Category Preview"
        style="max-width: 100px; display: block; margin: auto;" />
    </div>
    <!-- Category description -->
<div id="categoryDescription" style="text-align:center; color:#00477d; font-size:0.9rem; margin-top:8px;"></div>

  </td>
  <td class="notes-cell">
    <textarea id="logNote" class="white-input" placeholder="Add a note"></textarea>
  </td>
</tr>

    <!-- Row 3: Date -->
    <tr>
      <td colspan="2" style="padding: 10px;">
        <div id="logDateCalendar" class="multi-date-calendar"></div>
        <div id="logDateSummary" style="margin-top:8px; color:#00477d; font-size:0.9rem; font-weight:600;"></div>
        <div style="margin-top:6px; font-size:0.85rem; color:#00477d;">Points entered below will be applied to every selected date.</div>
      </td>
    </tr>

    <!-- Row 4: Points -->
    <tr>
      <td colspan="2" style="padding: 10px;">
        <input type="number" id="logPoints" class="white-input" placeholder="Enter number of points" style="width: 100%;" />
      </td>
    </tr>
<!-- Row 4.5: Info Text -->
<tr>
  <td colspan="2" style="padding: 5px 15px; text-align: center; font-size: 0.9rem; color: #00477d; font-weight: bold;">
    Practice points automatically receive 5 points per day. Log your practice daily! 
    All other entries will be assigned points and approved by your teacher.
  </td>
</tr>

<!-- Row 5: Submit + Cancel -->
<tr>
  <td colspan="2" style="padding: 20px; text-align: center;">
    <div style="display: flex; justify-content: center; gap: 20px;">
      <button type="submit">Submit</button>
      <button type="button" onclick="window.location.href='index.html'">Back to Home</button>
    </div>
  </td>
</tr>
  </table>
</form>
</main>

<footer>
  &copy; 2025 Milford Music Studios Achievement App
</footer>

<script type="module" src="config.js"></script>
<script type="module" src="supabaseClient.js"></script>
<script type="module" src="authGuard.js"></script>
<script type="module" src="log-points.js"></script>
</body>
</html>
