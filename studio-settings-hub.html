<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Studio Settings | Achievement App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="nav.css" />
  <link rel="stylesheet" href="settings-tabs.css" />
  <link rel="stylesheet" href="studio-settings-embed.css" />
</head>
<body class="app-shell app-bg bg-teal settings-page studio-settings-page">
  <div class="app-main">
    <div id="envBadge" class="env-badge" style="display:none;"></div>

    <main class="app">
      <div class="settings-wrap">
        <div id="settings-tabs"></div>
        <div class="settings-page-header">
          <img id="studioLogo" class="studio-logo-header" src="images/logos/logo.png" alt="Studio logo" onerror="this.style.display='none'">
          <h1 class="settings-title">Studio Settings</h1>
        </div>
        <section class="settings-section">

          <div id="studioAccessNotice" class="settings-card studio-access-card" style="display:none;">
            <div class="settings-card-body">
              <p>Studio settings are available to admins only.</p>
            </div>
          </div>

          <div id="studioSections" class="settings-accordion" style="display:none;">
            <div class="accordion-card" data-section="manage-users">
              <button type="button" class="accordion-header" aria-expanded="false">Manage Users</button>
              <div class="accordion-body" hidden>
                <div class="accordion-panel-content">
                  <div id="panel-manage-users" class="panel-root settings-panel-host" data-panel="manage-users"></div>
                </div>
              </div>
            </div>

            <div class="accordion-card" data-section="invite-student">
              <button type="button" class="accordion-header" aria-expanded="false">Invite Student/Staff</button>
              <div class="accordion-body" hidden>
                <div class="accordion-panel-content">
                  <div id="panel-invite-student" class="panel-root settings-panel-host" data-panel="invite-student"></div>
                </div>
              </div>
            </div>

            <div class="accordion-card" data-section="studio-settings">
              <button type="button" class="accordion-header" aria-expanded="false">Studio Controls</button>
              <div class="accordion-body" hidden>
                <div class="accordion-panel-content">
                  <div class="studio-controls-form">
                    <section class="settings-section">
                      <div class="section-head">
                        <div class="section-title">Studio Identity</div>
                      </div>
                      <div class="settings-rows">
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="studioName">Studio Name</label>
                          </div>
                          <div class="row-value">
                            <input id="studioName" type="text" class="settings-input" placeholder="Studio name" />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="studioEmail">Studio Email</label>
                          </div>
                          <div class="row-value">
                            <input id="studioEmail" type="email" class="settings-input" placeholder="studio@example.com" />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="studioLogoFile">Studio Logo</label>
                          </div>
                        <div class="row-value">
                          <label for="studioLogoFile" class="logo-upload-area">
                            <img id="studioLogoPreview" alt="Studio logo preview" style="display:none;" />
                            <span class="logo-upload-text">Click to replace logo</span>
                          </label>
                          <input id="studioLogoFile" type="file" accept="image/*" hidden />
                        </div>
                          <div></div>
                        </div>
                      </div>
                    </section>

                    <section class="settings-section">
                      <div class="section-head">
                        <div class="section-title">Permissions</div>
                      </div>
                      <div class="settings-rows">
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="teacherCanLogPoints">Teacher can log points</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="teacherCanLogPoints" aria-pressed="false">Disabled</button>
                            <input id="teacherCanLogPoints" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="teacherCanApproveLogs">Teacher can approve logs</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="teacherCanApproveLogs" aria-pressed="false">Disabled</button>
                            <input id="teacherCanApproveLogs" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="teacherCanCreateChallenges">Teacher can create challenges</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="teacherCanCreateChallenges" aria-pressed="false">Disabled</button>
                            <input id="teacherCanCreateChallenges" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row disabled-row" id="challengeApprovalRow">
                          <div class="row-label">
                            <label for="teacherChallengesRequireApproval">Teacher challenges require approval</label>
                            <button type="button" class="hint-toggle" data-hint-target="hint-challenges" aria-expanded="false">?</button>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="teacherChallengesRequireApproval" aria-pressed="false">Disabled</button>
                            <input id="teacherChallengesRequireApproval" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-hint" id="hint-challenges" hidden>
                          When ON, teacher-created challenges require admin approval before going live.
                        </div>
                        <div class="settings-row leaderboard-toggle-row">
                          <div class="row-label">
                            <span>Leaderboard</span>
                            <button type="button" class="hint-toggle" data-hint-target="hint-leaderboard" aria-expanded="false">?</button>
                          </div>
                          <div class="row-value" style="display:flex; flex-wrap:wrap; gap:12px; align-items:center;">
                            <button
                              type="button"
                              class="toggle-button disabled scope-toggle-single"
                              data-scope-toggle
                              aria-pressed="false"
                            >
                              Studio Only
                            </button>
                            <input
                              type="radio"
                              name="leaderboardScope"
                              id="leaderboardStudioOnly"
                              value="studio_only"
                              checked
                              hidden
                            />
                            <input
                              type="radio"
                              name="leaderboardScope"
                              id="leaderboardGlobal"
                              value="global"
                              hidden
                            />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-hint" id="hint-leaderboard" hidden>
                          Global is for future multi-studio mode and toggles a global view option for students.
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="badgesEnabled">Badges</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="badgesEnabled" aria-pressed="false">Disabled</button>
                            <input id="badgesEnabled" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                      </div>
                    </section>

                    <section class="settings-section">
                      <div class="section-head">
                        <div class="section-title">Notifications</div>
                      </div>
                      <div class="settings-rows">
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="adminOnLogSubmitted">Notify on log submitted</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="adminOnLogSubmitted" aria-pressed="false">Disabled</button>
                            <input id="adminOnLogSubmitted" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="adminOnLogFlagged">Notify on log flagged</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="adminOnLogFlagged" aria-pressed="false">Disabled</button>
                            <input id="adminOnLogFlagged" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                        <div class="settings-row">
                          <div class="row-label">
                            <label for="adminOnLevelUp">Notify on level up</label>
                          </div>
                          <div class="row-value toggle-row-value">
                            <button type="button" class="toggle-button disabled" data-toggle-target="adminOnLevelUp" aria-pressed="false">Disabled</button>
                            <input id="adminOnLevelUp" type="checkbox" hidden />
                          </div>
                          <div></div>
                        </div>
                      </div>
                    </section>


                    <div class="settings-actions" style="margin-top:24px;">
                      <button id="saveStudioSettingsBtn" type="button" class="blue-button">Save</button>
                      <div id="studioSettingsStatus" class="settings-hint" aria-live="polite"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
    <div id="toast" class="toast"></div>
  </div>

  <div id="app-bottom-nav"></div>
  <script src="config.js"></script>
  <script type="module" src="nav.js"></script>
  <script type="module" src="settings-tabs.js"></script>
  <script type="module" src="studio-settings.js"></script>
  <script type="module" src="studio-settings-hub.js"></script>
  <script type="module" src="manage-users.js"></script>
</body>
</html>
